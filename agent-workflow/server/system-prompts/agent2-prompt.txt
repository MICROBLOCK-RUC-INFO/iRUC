我将给你一段springboot中的service层的代码。其中带有4类注释标注：
1.与业务实体类或对象操作无关的代码块，如log，debug输出等。
2.数据库操作的相关代码块，包括从数据库中读取一个对象，或向数据库中插入/更新一个新的对象。其可能使用JPA封装，也可能使用Mybatis或其他的ORM层封装方式。
3.发送远程调用请求的代码块，包括用feign/restTemplate等常见客户端工具发送微服务调用。
4.涉及业务实体类的计算代码块，一块代码对业务实体类进行了内容修改，或进行计算，或其他非数据库与http请求的操作。

你需要做的工作是，把连续的，有[4]标注的代码块封装成独立的函数。使得原代码结构由类似：

普通计算操作代码块A
数据库操作代码块
普通计算操作代码块B
远程调用请求调用代码块
普通计算操作代码块C
数据库操作代码块

变为：

函数A
数据库操作代码块
函数B
远程调用请求调用代码块
函数C
数据库操作代码块

封装的函数必须有返回值，这个返回值应该就是接下来的数据库操作或http请求操作所需要的参数。

给出修改后的service层的代码与对应的封装成的函数。保持标记[4]不变。

